# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Call to Book >> An ECMS user creates a CTB component and views it on the General Content page undefined @component @inw
- Location: /home/runner/work/quality/quality/tests/e2e_tests/inw_tests/components/ctb.spec.ts:27:9

# Error details

```
Error: locator.evaluate: Test timeout of 180000ms exceeded.
Call log:
  - waiting for getByText('02045388944').locator('svg[title="Dropdown"]')

    at CTBComponent.validateCtbButtonAvailability (/home/runner/work/quality/quality/tests/resources/inw_resources/page_objects/component/ctb.ts:56:136)
    at /home/runner/work/quality/quality/tests/e2e_tests/inw_tests/components/ctb.spec.ts:85:13
    at /home/runner/work/quality/quality/tests/e2e_tests/inw_tests/components/ctb.spec.ts:82:9
```

# Page snapshot

```yaml
- banner:
  - button "Skip to menu"
  - button "Skip to content"
  - button "Umbraco info":
    - img
  - navigation "Primary":
    - list:
      - listitem:
        - link "Content (active)": Content
      - listitem:
        - link "Media"
      - listitem:
        - link "Settings"
      - listitem:
        - link "Packages"
      - listitem:
        - link "Users"
      - listitem:
        - link "Members"
      - listitem:
        - link "Forms"
      - listitem:
        - link "Translation"
      - listitem:
        - link "SEO"
  - list:
    - listitem:
      - button "Open backoffice search..."
    - listitem:
      - button "Open/Close backoffice help..."
    - listitem:
      - button "Open/Close your profile options... C"
- navigation "Content":
  - list:
    - listitem:
      - heading "Content" [level=1]:
        - link "Content"
      - button "Open context node for Content"
      - list:
        - listitem:
          - button "Expand child items for Home"
          - link "Home"
          - button "Open context menu for Home"
          - list:
            - listitem:
              - link "Search"
              - button "Open context menu for Search"
            - listitem:
              - button "Expand child items for Ski Holidays"
              - link "Ski Holidays"
              - button "Open context menu for Ski Holidays"
            - listitem:
              - button "Expand child items for Walking Holidays"
              - link "Walking Holidays"
              - button "Open context menu for Walking Holidays"
            - listitem:
              - button "Expand child items for Lapland Holidays"
              - link "Lapland Holidays"
              - button "Open context menu for Lapland Holidays"
            - listitem:
              - button "Expand child items for About us"
              - link "About us"
              - button "Open context menu for About us"
            - listitem:
              - text: î‰š
              - link "Main Promotional Banner"
              - button "Open context menu for Main Promotional Banner"
            - listitem:
              - link "FAQ"
              - button "Open context menu for FAQ"
            - listitem:
              - link "FAQ Search Result"
              - button "Open context menu for FAQ Search Result"
            - listitem:
              - link "FAQ Category"
              - button "Open context menu for FAQ Category"
            - listitem:
              - link "Contact us"
              - button "Open context menu for Contact us"
            - listitem:
              - link "Sign Up"
              - button "Open context menu for Sign Up"
            - listitem:
              - link "Request a brochure"
              - button "Open context menu for Request a brochure"
            - listitem:
              - button "Expand child items for Travel advice"
              - link "Travel advice"
              - button "Open context menu for Travel advice"
            - listitem:
              - button "Expand child items for Legal"
              - link "Legal"
              - button "Open context menu for Legal"
            - listitem:
              - link "Automation Test Page d6b5b928"
              - button "Open context menu for Automation Test Page d6b5b928"
            - listitem:
              - link "Automation Test Page 31eb16b9"
              - button "Open context menu for Automation Test Page 31eb16b9"
            - listitem:
              - link "Automation Test Page aed76097"
              - button "Open context menu for Automation Test Page aed76097"
            - listitem:
              - link "Automation Test Page 46f0d244"
              - button "Open context menu for Automation Test Page 46f0d244"
            - listitem:
              - link "Automation Test Page 69dbb42e"
              - button "Open context menu for Automation Test Page 69dbb42e"
            - listitem:
              - link "Automation Test Page 87af4c81"
              - button "Open context menu for Automation Test Page 87af4c81"
            - listitem:
              - link "Automation Test Page db3c41fe"
              - button "Open context menu for Automation Test Page db3c41fe"
            - listitem:
              - link "Automation Test Page db3c41fe (1)"
              - button "Open context menu for Automation Test Page db3c41fe (1)"
            - listitem:
              - link "Automation Test Page 88cd3752"
              - button "Open context menu for Automation Test Page 88cd3752"
            - listitem:
              - link "Automation Test Page 97cfcde0"
              - button "Open context menu for Automation Test Page 97cfcde0"
            - listitem:
              - link "Automation Test Page 1e4b8022"
              - button "Open context menu for Automation Test Page 1e4b8022"
            - listitem:
              - link "Automation Test Page bb800d7c"
              - button "Open context menu for Automation Test Page bb800d7c"
            - listitem:
              - link "Automation Test Page e36c8927"
              - button "Open context menu for Automation Test Page e36c8927"
            - listitem:
              - link "Automation Test Page 62e09fbf"
              - button "Open context menu for Automation Test Page 62e09fbf"
            - listitem:
              - link "Automation Test Page 31032a93"
              - button "Open context menu for Automation Test Page 31032a93"
            - listitem:
              - link "Automation Test Page 2a2e5cd2"
              - button "Open context menu for Automation Test Page 2a2e5cd2"
            - listitem:
              - link "Automation Test Page 14f64d1f"
              - button "Open context menu for Automation Test Page 14f64d1f"
            - listitem:
              - link "Automation Test Page 403afc4e"
              - button "Open context menu for Automation Test Page 403afc4e"
            - listitem:
              - link "Automation Test Page 269d0767"
              - button "Open context menu for Automation Test Page 269d0767"
            - listitem:
              - link "Automation Test Page 7ffd106c"
              - button "Open context menu for Automation Test Page 7ffd106c"
            - listitem:
              - link "Automation Test Page 3960b106"
              - button "Open context menu for Automation Test Page 3960b106"
            - listitem:
              - link "Automation Test Page 939ee4ee"
              - button "Open context menu for Automation Test Page 939ee4ee"
            - listitem:
              - link "Automation Test Page fafa4d77"
              - button "Open context menu for Automation Test Page fafa4d77"
            - listitem:
              - link "Automation Test Page eb5d202b"
              - button "Open context menu for Automation Test Page eb5d202b"
            - listitem:
              - link "Automation Test Page f12933f0"
              - button "Open context menu for Automation Test Page f12933f0"
            - listitem:
              - link "Automation Test Page e2101175"
              - button "Open context menu for Automation Test Page e2101175"
            - listitem:
              - link "Automation Test Page 021f566b"
              - button "Open context menu for Automation Test Page 021f566b"
            - listitem:
              - link "Automation Test Page bd356bc5"
              - button "Open context menu for Automation Test Page bd356bc5"
            - listitem:
              - link "Automation Test Page 79d236f1"
              - button "Open context menu for Automation Test Page 79d236f1"
            - listitem:
              - link "Automation Test Page cee32892"
              - button "Open context menu for Automation Test Page cee32892"
            - listitem:
              - link "Automation Test Page 37497d3c"
              - button "Open context menu for Automation Test Page 37497d3c"
            - listitem:
              - link "Automation Test Page aaf8c1fb"
              - button "Open context menu for Automation Test Page aaf8c1fb"
            - listitem:
              - link "Automation Test Page 37497d3c (1)"
              - button "Open context menu for Automation Test Page 37497d3c (1)"
            - listitem:
              - link "Automation Test Page aaf8c1fb (1)"
              - button "Open context menu for Automation Test Page aaf8c1fb (1)"
            - listitem:
              - link "Automation Test Page cee32892 (1)"
              - button "Open context menu for Automation Test Page cee32892 (1)"
            - listitem:
              - link "Automation Test Page cee32892 (2)"
              - button "Open context menu for Automation Test Page cee32892 (2)"
            - listitem:
              - link "Automation Test Page cee32892 (3)"
              - button "Open context menu for Automation Test Page cee32892 (3)"
            - listitem:
              - link "Automation Test Page 8b9c660c"
              - button "Open context menu for Automation Test Page 8b9c660c"
            - listitem:
              - link "Automation Test Page c98b092e"
              - button "Open context menu for Automation Test Page c98b092e"
            - listitem:
              - link "Automation Test Page e85e5f43"
              - button "Open context menu for Automation Test Page e85e5f43"
            - listitem:
              - link "Automation Test Page 6593ca9f"
              - button "Open context menu for Automation Test Page 6593ca9f"
            - listitem:
              - link "Automation Test Page e4413522"
              - button "Open context menu for Automation Test Page e4413522"
            - listitem:
              - link "Test"
              - button "Open context menu for Test"
            - listitem:
              - link "Automation Test Page 81732c0f"
              - button "Open context menu for Automation Test Page 81732c0f"
            - listitem:
              - link "Automation Test Page 2e760391"
              - button "Open context menu for Automation Test Page 2e760391"
            - listitem:
              - link "Automation Test Page 515ebc62"
              - button "Open context menu for Automation Test Page 515ebc62"
            - listitem:
              - link "Automation Test Page 515ebc62 (1)"
              - button "Open context menu for Automation Test Page 515ebc62 (1)"
            - listitem:
              - link "Automation Test Page 63639bf2"
              - button "Open context menu for Automation Test Page 63639bf2"
            - listitem:
              - link "Automation Test Page 75442f95"
              - button "Open context menu for Automation Test Page 75442f95"
            - listitem:
              - link "Automation Test Page 7d6b641b"
              - button "Open context menu for Automation Test Page 7d6b641b"
            - listitem:
              - link "Automation Test Page 254d21f7"
              - button "Open context menu for Automation Test Page 254d21f7"
            - listitem:
              - link "Automation Test Page 73786ad5"
              - button "Open context menu for Automation Test Page 73786ad5"
            - listitem:
              - link "Automation Test Page 0a47f662"
              - button "Open context menu for Automation Test Page 0a47f662"
            - listitem:
              - link "Automation Test Page 77619c13"
              - button "Open context menu for Automation Test Page 77619c13"
            - listitem:
              - link "Automation Test Page 9ca1e139"
              - button "Open context menu for Automation Test Page 9ca1e139"
            - listitem:
              - link "Automation Test Page f8230c71"
              - button "Open context menu for Automation Test Page f8230c71"
            - listitem:
              - link "Automation Test Page f8230c71 (1)"
              - button "Open context menu for Automation Test Page f8230c71 (1)"
            - listitem:
              - link "Automation Test Page 401e6845"
              - button "Open context menu for Automation Test Page 401e6845"
            - listitem:
              - link "Automation Test Page 88f7c1c6"
              - button "Open context menu for Automation Test Page 88f7c1c6"
            - listitem:
              - link "Automation Test Page 2121b791"
              - button "Open context menu for Automation Test Page 2121b791"
            - listitem:
              - link "Automation Test Page 2121b791 (1)"
              - button "Open context menu for Automation Test Page 2121b791 (1)"
            - listitem:
              - link "Automation Test Page 88f7c1c6 (1)"
              - button "Open context menu for Automation Test Page 88f7c1c6 (1)"
            - listitem:
              - link "Automation Test Page 02d04f7d"
              - button "Open context menu for Automation Test Page 02d04f7d"
            - listitem:
              - link "Automation Test Page a5437c4c"
              - button "Open context menu for Automation Test Page a5437c4c"
            - listitem:
              - link "Automation Test Page 0afd8265"
              - button "Open context menu for Automation Test Page 0afd8265"
            - listitem:
              - link "Automation Test Page b8cf60da"
              - button "Open context menu for Automation Test Page b8cf60da"
            - listitem:
              - link "Automation Test Page 408e729a"
              - button "Open context menu for Automation Test Page 408e729a"
            - listitem:
              - link "Automation Test Page 113cf01e"
              - button "Open context menu for Automation Test Page 113cf01e"
            - listitem:
              - link "Automation Test Page 40140610"
              - button "Open context menu for Automation Test Page 40140610"
            - listitem:
              - link "Automation Test Page 36977064"
              - button "Open context menu for Automation Test Page 36977064"
            - listitem:
              - link "Automation Test Page ccc0b5d8"
              - button "Open context menu for Automation Test Page ccc0b5d8"
            - listitem:
              - link "Automation Test Page ccc0b5d8 (1)"
              - button "Open context menu for Automation Test Page ccc0b5d8 (1)"
            - listitem:
              - link "Automation Test Page c60de125"
              - button "Open context menu for Automation Test Page c60de125"
            - listitem:
              - link "Automation Test Page 87f424d3"
              - button "Open context menu for Automation Test Page 87f424d3"
            - listitem:
              - link "Automation Test Page 628ca6cd"
              - button "Open context menu for Automation Test Page 628ca6cd"
            - listitem:
              - link "Automation Test Page eee441e9"
              - button "Open context menu for Automation Test Page eee441e9"
            - listitem:
              - link "Automation Test Page 1a71d4fd"
              - button "Open context menu for Automation Test Page 1a71d4fd"
            - listitem:
              - link "Automation Test Page e14c3d39"
              - button "Open context menu for Automation Test Page e14c3d39"
            - listitem:
              - link "Automation Test Page 886e153d"
              - button "Open context menu for Automation Test Page 886e153d"
            - listitem:
              - link "Automation Test Page c318e289"
              - button "Open context menu for Automation Test Page c318e289"
            - listitem:
              - link "Automation Test Page f7a50053"
              - button "Open context menu for Automation Test Page f7a50053"
            - listitem:
              - link "Automation Test Page 74415113"
              - button "Open context menu for Automation Test Page 74415113"
            - listitem:
              - link "Automation Test Page 9f8b84cb"
              - button "Open context menu for Automation Test Page 9f8b84cb"
            - listitem:
              - link "Automation Test Page b694ef1e"
              - button "Open context menu for Automation Test Page b694ef1e"
            - listitem:
              - link "Swathi test columns"
              - button "Open context menu for Swathi test columns"
            - listitem:
              - link "Automation Test Page 52622382"
              - button "Open context menu for Automation Test Page 52622382"
            - listitem:
              - link "Automation Test Page 1a47b180"
              - button "Open context menu for Automation Test Page 1a47b180"
            - listitem:
              - link "Automation Test Page b2c018c8"
              - button "Open context menu for Automation Test Page b2c018c8"
            - listitem:
              - link "Automation Test Page 7b55011d"
              - button "Open context menu for Automation Test Page 7b55011d"
            - listitem:
              - link "Automation Test Page b2c018c8 (1)"
              - button "Open context menu for Automation Test Page b2c018c8 (1)"
            - listitem:
              - link "Automation Test Page 7b55011d (1)"
              - button "Open context menu for Automation Test Page 7b55011d (1)"
            - listitem:
              - link "Automation Test Page 1a47b180 (1)"
              - button "Open context menu for Automation Test Page 1a47b180 (1)"
            - listitem:
              - link "Automation Test Page 1a47b180 (2)"
              - button "Open context menu for Automation Test Page 1a47b180 (2)"
            - listitem:
              - link "Automation Test Page 154755a0"
              - button "Open context menu for Automation Test Page 154755a0"
            - listitem:
              - link "Automation Test Page bb7510cd"
              - button "Open context menu for Automation Test Page bb7510cd"
            - listitem:
              - link "Automation Test Page 2893c75a"
              - button "Open context menu for Automation Test Page 2893c75a"
            - listitem:
              - link "Automation Test Page 1b40504f"
              - button "Open context menu for Automation Test Page 1b40504f"
            - listitem:
              - link "Automation Test Page 60d951f2"
              - button "Open context menu for Automation Test Page 60d951f2"
            - listitem:
              - link "Rachel Test"
              - button "Open context menu for Rachel Test"
            - listitem:
              - link "Automation Test Page 1c7940ed"
              - button "Open context menu for Automation Test Page 1c7940ed"
            - listitem:
              - link "Automation Test Page c21329b9"
              - button "Open context menu for Automation Test Page c21329b9"
            - listitem:
              - link "Automation Test Page 838c48cf"
              - button "Open context menu for Automation Test Page 838c48cf"
            - listitem:
              - link "Automation Test Page 5bf0053a"
              - button "Open context menu for Automation Test Page 5bf0053a"
            - listitem:
              - link "Automation Test Page 7f7aa238"
              - button "Open context menu for Automation Test Page 7f7aa238"
            - listitem:
              - link "Automation Test Page 4519805f"
              - button "Open context menu for Automation Test Page 4519805f"
        - listitem:
          - button "Expand child items for System"
          - link "System"
          - button "Open context menu for System"
          - list:
            - listitem:
              - button "Expand child items for Programs"
              - link "Programs"
              - button "Open context menu for Programs"
            - listitem:
              - link "Header"
              - button "Open context menu for Header"
            - listitem:
              - link "Page Banner"
              - button "Open context menu for Page Banner"
            - listitem:
              - link "Footer"
              - button "Open context menu for Footer"
            - listitem:
              - link "Emergency Banner"
              - button "Open context menu for Emergency Banner"
            - listitem:
              - link "Error"
              - button "Open context menu for Error"
            - listitem:
              - link "Error 400"
              - button "Open context menu for Error 400"
            - listitem:
              - link "Error 404"
              - button "Open context menu for Error 404"
            - listitem:
              - link "Error 410"
              - button "Open context menu for Error 410"
            - listitem:
              - link "Error 500"
              - button "Open context menu for Error 500"
            - listitem:
              - link "xml-sitemap"
              - button "Open context menu for xml-sitemap"
            - listitem:
              - link "Sitemap"
              - button "Open context menu for Sitemap"
            - listitem:
              - link "Contact Section"
              - button "Open context menu for Contact Section"
            - listitem:
              - link "Standard Opening Times"
              - button "Open context menu for Standard Opening Times"
            - listitem:
              - link "CHOX"
              - button "Open context menu for CHOX"
            - listitem:
              - link "Robots.txt"
              - button "Open context menu for Robots.txt"
        - listitem:
          - button "Expand child items for Data Hubs"
          - link "Data Hubs"
          - button "Open context menu for Data Hubs"
        - listitem:
          - button "Expand child items for Recycle Bin"
          - link "Recycle Bin"
          - button "Open context menu for Recycle Bin"
- paragraph: Edit Automation Test Page 4519805f
- text: Name
- textbox "Name": Automation Test Page 4519805f
- list:
  - listitem:
    - button "Content"
  - listitem:
    - button "Info"
  - listitem
- button "Actions"
- text: Links
- list:
  - listitem:
    - link "en-GB /automation-test-page-4519805f"
  - listitem:
    - text: en-US
    - emphasis: This document is published but is not in the cache
- text: History
- button "Rollback..."
- text: C christian.ticar 19 August 2025 10:03 Publish Content saved and Published C christian.ticar 19 August 2025 10:03 Publish Content saved and Published General Status Published Created Date 19 August 2025 10:03 Document Type Generic Content Page
- button "Open Generic Content Page..."
- text: Template
- combobox:
  - option "Generic Template" [selected]
  - option "TestTemplate"
- button "Open GenericTemplate Template"
- text: Id 38285 05f2f0bc-a03c-47e0-b209-29dfa6dfb8be
- list:
  - listitem:
    - link "Home"
    - text: /
  - listitem: Automation Test Page 4519805f
- button "Save and preview"
- button "Save"
- button "Save and publish"
- button "Save and publish"
- list
```

# Test source

```ts
   1 | import { type Page, type Locator, expect } from '@playwright/test';
   2 | import { faker } from '@faker-js/faker';
   3 |
   4 | export class CTBComponent {
   5 |     readonly page: Page
   6 |     readonly ctbTitle: Locator
   7 |     readonly ctbPhoneNumer: Locator
   8 |     readonly ctbLayout: Locator
   9 |     readonly telephonNumberFld: Locator
  10 |     public ctbTitleData: string
  11 |     public ctaPhoneNumber: string
  12 |     public telephoneNumberFromContactSection: string
  13 |     public selectedLayout: string[]
  14 |
  15 |     constructor(page: Page) {
  16 |         this.page = page;
  17 |         this.ctbTitle = page.locator('#title')
  18 |         this.ctbPhoneNumer = page.locator('#phoneNumber')
  19 |         this.ctbLayout = page.locator('select[name="dropDownList"]').nth(2)
  20 |         this.ctbTitleData = faker.word.adjective() + ' ' + faker.word.noun() + ' CTB Automation ' + faker.number.int({ min: 50, max: 1000 })
  21 |         this.ctaPhoneNumber = faker.phone.number({ style: 'national' })
  22 |         this.telephonNumberFld = page.locator('#telephoneNumber')
  23 |     }
  24 |
  25 |     async fillOutCTBTitle() {
  26 |         await this.ctbTitle.waitFor({ state: 'visible' })
  27 |         await this.ctbTitle.fill(this.ctbTitleData)
  28 |     }
  29 |
  30 |     async fillOutCTBPhoneNumber() {
  31 |         await this.ctbPhoneNumer.fill(this.ctaPhoneNumber)
  32 |     }
  33 |
  34 |     async getCTBPhoneNumber() {
  35 |         await this.telephonNumberFld.waitFor({ state: 'visible' })
  36 |         this.telephoneNumberFromContactSection = await this.telephonNumberFld.inputValue()
  37 |
  38 |         return this.telephoneNumberFromContactSection
  39 |     }
  40 |
  41 |     async selectCTBLayout() {
  42 |         const layoutRandomIndex = Math.floor(Math.random() * 2) + 1;
  43 |         await this.ctbLayout.click()
  44 |         this.selectedLayout = await this.ctbLayout.selectOption({ index: layoutRandomIndex })
  45 |     }
  46 |
  47 |     async validateCtbButtonAvailability(newPage, rteContent) {
  48 |         let actualCtbPhoneIcon: any
  49 |         const ctbLayout = this.selectedLayout[0].split(':')[1]
  50 |         expect(await newPage.getByText(this.ctbTitleData).isVisible(), "CTB Title is visible").toBeTruthy();
  51 |
  52 |         if (ctbLayout === 'Standard') {
  53 |             await expect(newPage.locator('body')).toContainText(rteContent);
  54 |             const actualCtbLayout = await newPage.getByText(`${this.ctbTitleData}`).evaluate(node => node.className)
  55 |             expect(actualCtbLayout.includes('title'), "CTB Layout is correct").toBeTruthy()
> 56 |             actualCtbPhoneIcon = await newPage.getByText(`${this.telephoneNumberFromContactSection}`).locator('svg[title="Dropdown"]').evaluate(node => node.classList.value)
     |                                                                                                                                        ^ Error: locator.evaluate: Test timeout of 180000ms exceeded.
  57 |
  58 |
  59 |         } else if (ctbLayout === 'Compact') {
  60 |             const actualCtbLayout = await newPage.getByText(`${this.ctbTitleData}`).evaluate(node => node.className)
  61 |             expect(actualCtbLayout.includes('leftContent'), "CTB Layout is correct").toBeTruthy()
  62 |
  63 |             actualCtbPhoneIcon = await newPage.getByText(`${this.telephoneNumberFromContactSection}`).nth(2).evaluate(node => node.previousElementSibling.classList.value)
  64 |         }
  65 |
  66 |         expect(await actualCtbPhoneIcon?.includes('icon-phone-outlined'), "CTB Phone icon is correct").toBeTruthy()
  67 |     }
  68 |
  69 | }
  70 |
  71 | export default CTBComponent
```